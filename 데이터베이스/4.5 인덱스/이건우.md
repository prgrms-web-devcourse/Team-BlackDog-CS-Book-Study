## ì¸ë±ìŠ¤ë€?

ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### ì¸ë±ìŠ¤ì˜ íŠ¹ì§•

ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ í•­ìƒ ì •ë ¬ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ì €ì¥ ê³¼ì •ì´ ë³µì¡í•˜ê³  ëŠë¦¬ì§€ë§Œ ê·¸ë§Œí¼ ì •ë ¬ë¼ìˆì–´ ì›í•˜ëŠ” ê°’ì„ ë¹¨ë¦¬ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

## B-Tree ì¸ë±ìŠ¤(Balanced Tree)

ë°ì´í„°ë² ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ ì¸ë±ì‹± ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.

ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬ì™€ ë¹„ìŠ·í•œ êµ¬ì¡°ì§€ë§Œ í•œ ë…¸ë“œê°€ ìì‹ì„ 2ê°œ ì´ìƒ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

![btree](https://user-images.githubusercontent.com/82176176/205386426-3f42a1bd-cc15-4aff-bfca-2cdf1fd88080.png)


### êµ¬ì¡°

B-TreeëŠ” íŠ¸ë¦¬êµ¬ì¡°ì˜ ìµœìƒìœ„ì— í•˜ë‚˜ì˜ `ë£¨íŠ¸ ë…¸ë“œ`ê°€ ì¡´ì¬í•˜ê³  í•˜ìœ„ ìì‹ ë…¸ë“œê°€ ë¶™ì–´ìˆëŠ” í˜•íƒœ

ê°€ì¥ í•˜ìœ„ì— ìˆëŠ” ë…¸ë“œë¥¼ `ë¦¬í”„ ë…¸ë“œ`ë¼ í•˜ê³ , ì¤‘ê°„ì— ìˆëŠ” ë…¸ë“œë¥¼ `ë¸Œëœì¹˜ ë…¸ë“œ`ë¼ê³  í•œë‹¤.

### B-Tree ì¡°ê±´

- ë…¸ë“œê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìì‹ ë…¸ë“œì˜ ê°œìˆ˜ë¥¼ Mì´ë¼ í•  ë•Œ í•´ë‹¹  B-Treeë¥¼ M ì°¨ B-Treeë¼ê³  í•œë‹¤.
- í•´ë‹¹ ë…¸ë“œê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” Keyì˜ ìµœëŒ“ê°’ì€ M-1ì´ë‹¤.
- nodeì˜ keyëŠ” ë°˜ë“œì‹œ ì •ë ¬ëœ ìƒíƒœì´ë‹¤.
- ëª¨ë“  leaf nodeë“¤ì€ ë°˜ë“œì‹œ ê°™ì€ levelì— ìˆì–´ì•¼ í•œë‹¤.
- nodeì˜ key ìˆ˜ê°€ k ê°œì¼ ë•Œ, ìì‹ nodeì˜ ê°œìˆ˜ëŠ” k+1ê°œì´ë‹¤.
- M ì°¨ íŠ¸ë¦¬ì¼ ë•Œ, root nodeì™€ leaf nodeë¥¼ ì œì™¸í•œ ëª¨ë“  nodeëŠ” ìµœì†ŒÂ âŒˆM/2âŒ‰, ìµœëŒ€Â M ê°œì˜ ì„œë¸Œ íŠ¸ë¦¬ë¥¼ ê°–ëŠ”ë‹¤**.**

## ì¸ë±ìŠ¤ì˜ ì¢…ë¥˜

### í´ëŸ¬ìŠ¤í„° ì¸ë±ìŠ¤

PKì—ì„œ ì ìš©ë˜ëŠ” ì¸ë±ìŠ¤ì´ë‹¤.

PK ê°’ì´ ë¹„ìŠ·í•œ ë ˆì½”ë“œë¼ë¦¬ ë¬¶ì–´ì„œ ì €ì¥í•˜ëŠ” ê²ƒì„ í´ëŸ¬ìŠ¤í„°ë§ ì¸ë±ìŠ¤ë¼ í‘œí˜„í•œë‹¤.

PK ê°’ì— ì˜í•´ ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì ì¸ ì €ì¥ ìœ„ì¹˜ê°€ ê²°ì •ëœë‹¤.

PK ê°’ ê¸°ì¤€ìœ¼ë¡œ í•­ìƒ ì •ë ¬ë˜ì–´ ìˆë‹¤.

PK ê°’ì´ ë³€ê²½ë˜ë©´ ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì ì¸ ì €ì¥ ìœ„ì¹˜ê°€ ë°”ê·€ì–´ì•¼ í•œë‹¤ 

í´ëŸ¬ìŠ¤í„° ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸”ì€ PKë¥¼ ì´ìš©í•œ í‚¤ ê¸°ë°˜ì˜ ê²€ìƒ‰ì€ ë§¤ìš° ë¹ ë¥´ì§€ë§Œ ì €ì¥, ë³€ê²½ì´ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¬ë‹¤.

í´ëŸ¬ìŠ¤í„°ë§ ì¸ë±ìŠ¤ì—ì„œ PK ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´?

1. í”„ë¼ì´ë¨¸ë¦¬ í‚¤ê°€ ìˆìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¼ì´ë¨¸ë¦¬ í‚¤ë¥¼ í´ëŸ¬ìŠ¤í„°ë§ í‚¤ë¡œ ì„ íƒí•œë‹¤.
2. NOT NULL ì˜µì…˜ì˜ ìœ ë‹ˆí¬ ì¸ë±ìŠ¤ ì¤‘ì—ì„œ ì²« ë²ˆì§¸ ì¸ë±ìŠ¤ë¥¼ í´ëŸ¬ìŠ¤í„°ë§ í‚¤ë¡œ ì„ íƒí•œë‹¤.
3. ìë™ìœ¼ë¡œ ìœ ë‹ˆí¬í•œ ê°’ì„ ê°€ì§€ë„ë¡ ì¦ê°€ë˜ëŠ” ì¹¼ëŸ¼ì„ ë‚´ë¶€ì ìœ¼ë¡œ ì¶”ê°€í•œ í›„, í´ëŸ¬ìŠ¤í„°ë§ í‚¤ë¡œ ì„ íƒí•œë‹¤.

### ë³´ì¡° ì¸ë±ìŠ¤

í´ëŸ¬ìŠ¤í„° ì™€ ë‹¬ë¦¬ ìë™ ì •ë ¬ ë˜ì§€ ì•ŠëŠ”ë‹¤.

ë³´ì¡° ì¸ë±ìŠ¤ëŠ” ì—¬ëŸ¬ ê°œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. 

í´ëŸ¬ìŠ¤í„° ì™€ ë‹¬ë¦¬ ìë™ ì •ë ¬ë˜ì§€ ì•ŠëŠ”ë‹¤.

ë³´ì¡° ì¸ë±ìŠ¤ì— ê°™ì€ ê°’ì´ ë‘ ê°œ ì´ìƒ ì €ì¥ë  ìˆ˜ ìˆìœ¼ë©´ **ìœ ë‹ˆí¬ ì¸ë±ìŠ¤**ë¼ê³  í•œë‹¤.

## ì¸ë±ìŠ¤ ë¬¸ë²•

```sql
SHOW INDEX FROM í…Œì´ë¸”ì´ë¦„
```
![index](https://user-images.githubusercontent.com/82176176/205386590-f4f28bce-e35e-4bfb-827e-0c43d1ac4d75.PNG)


- **Table**Â : í…Œì´ë¸”ì˜ ì´ë¦„ì„ í‘œì‹œí•œë‹¤.
- **Non_unique**Â : ì¸ë±ìŠ¤ê°€Â ì¤‘ë³µëœ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©´ 1, ì €ì¥í•  ìˆ˜ ì—†ìœ¼ë©´ 0ì„ í‘œì‹œí•œë‹¤.
- **Key_name**Â :Â ì¸ë±ìŠ¤ì˜ ì´ë¦„ì„ í‘œì‹œí•˜ë©°, ì¸ë±ìŠ¤ê°€ í•´ë‹¹ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¼ë©´ PRIMARYë¡œ í‘œì‹œí•œë‹¤.
- **Seq_in_index**Â : ì¸ë±ìŠ¤ì—ì„œì˜ í•´ë‹¹ í•„ë“œì˜ ìˆœì„œë¥¼ í‘œì‹œí•œë‹¤.
- **Column_name**Â : í•´ë‹¹ í•„ë“œì˜ ì´ë¦„ì„ í‘œì‹œí•œë‹¤.
- **Collation**Â : ì¸ë±ìŠ¤ì—ì„œ í•´ë‹¹ í•„ë“œê°€ ì •ë ¬ë˜ëŠ” ë°©ë²•ì„ í‘œì‹œí•œë‹¤.
- **Cardinality**Â : ì¸ë±ìŠ¤ì— ì €ì¥ëœ ìœ ì¼í•œ ê°’ë“¤ì˜ ìˆ˜ë¥¼ í‘œì‹œí•œë‹¤.
- **Sub_part**Â : ì¸ë±ìŠ¤ ì ‘ë‘ì–´ë¥¼ í‘œì‹œí•œë‹¤.
- **Packed**Â : í‚¤ê°€ ì••ì¶•ë˜ëŠ”(packed) ë°©ë²•ì„ í‘œì‹œí•œë‹¤.
- **Null**Â : í•´ë‹¹ í•„ë“œê°€ NULLì„ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©´ YESë¥¼ í‘œì‹œí•˜ê³ , ì €ì¥í•  ìˆ˜ ì—†ìœ¼ë©´ ''ë¥¼ í‘œì‹œí•œë‹¤.
- **Index_type**Â : ì¸ë±ìŠ¤ì— ì‚¬ìš©ë˜ëŠ” ë©”ì†Œë“œ(method)ë¥¼ í‘œì‹œí•œë‹¤.
- **Comment**Â : í•´ë‹¹ í•„ë“œë¥¼ ì„¤ëª…í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì¸ë±ìŠ¤ì— ê´€í•œ ê¸°íƒ€ ì •ë³´ë¥¼ í‘œì‹œí•œë‹¤.
- **Index_comment**Â : ì¸ë±ìŠ¤ì— ê´€í•œ ëª¨ë“  ê¸°íƒ€ ì •ë³´ë¥¼ í‘œì‹œí•œë‹¤.

## ì¸ë±ìŠ¤ ìƒì„±

```sql
create table study(
	study_id Integer Primary key,
    study_name varchar(10) unique,
    study_date varchar(10) NOT NULL,
    
    INDEX idx (study_date asc)
);
```

![indexcreate](https://user-images.githubusercontent.com/82176176/205386656-82164489-044f-4a88-a10e-6169a31f732a.PNG)


## CREATE INDEX ë¬¸

```sql
CREATE INDEX idx ON study (study_id); -- ë³´ì¡° ì¸ë±ìŠ¤ ìƒì„± (ì¤‘ë³µ í—ˆìš©)
CREATE UNIQUE INDEX idx ON study (study_name); -- ë³´ì¡° ì¸ë±ìŠ¤ ìƒì„± (ì¤‘ë³µ ë¹„í—ˆìš©)
CREATE UNIQUE INDEX idx ON study (study_id,study_name); -- ë‹¤ì¤‘ ì»¬ëŸ¼ ì¸ë±ìŠ¤ ìƒì„±
```

## Alter Add Index ë¬¸

```sql
ALTER TABLE study
ADD INDEX idx (study_name);
-- ì¤‘ë³µì„ í—ˆìš©í•˜ëŠ” ì¸ë±ìŠ¤.
-- ë³´ì¡° ì¸ë±ìŠ¤.

ALTER TABLE study
ADD UNIQUE INDEX idx (study_name);
-- ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ìœ ì¼í•œ í‚¤. null í—ˆìš©. 
-- ë³´ì¡° ì¸ë±ìŠ¤.
```

## ì¸ë±ìŠ¤ ì‚¬ìš© í™•ì¸

```sql
create table study(
	study_id Integer,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

CREATE UNIQUE INDEX idx ON study (study_name);

-- insert

select * from study where study_name = 'cs';

```

![indexexample](https://user-images.githubusercontent.com/82176176/205386744-429ac654-ae17-479e-84cc-6219854d4bf3.PNG)


```sql
create table study(
	study_id Integer,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

-- insert

select * from study where study_name = 'cs';

```

![fulltablescan](https://user-images.githubusercontent.com/82176176/205386760-813b684a-1a07-4b01-b662-8a3fd93efdf2.PNG)

```sql
create table study(
	study_id Integer Primary key,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

-- insert

select * from study where study_id = 1;
```

![primary](https://user-images.githubusercontent.com/82176176/205386778-5f4d973c-d415-4d66-b130-c8aa5e47bbd1.PNG)


## ì¸ë±ìŠ¤ ì‚­ì œ

```sql
DROP INDEX study_name on study;

ALTER TABLE study
DROP INDEX stduy_name;
```

```sql
drop table study;
drop table student;

create table study(
	study_id Integer,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

create table study(
	study_id Integer Primary key,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

create table study(
	study_id Integer Primary key,
    study_name varchar(10) unique,
    study_date varchar(10) NOT NULL,
    
    INDEX idx (study_date asc)
);

create table study(
	study_id Integer,
    study_name varchar(10) NOT NULL,
    study_date varchar(10) NOT NULL
);

CREATE INDEX idx ON study (study_id);
CREATE UNIQUE INDEX idx ON study (study_name);
CREATE UNIQUE INDEX idx ON study (study_id,study_name);

ALTER TABLE study
ADD INDEX idx (study_name);

ALTER TABLE study
ADD UNIQUE INDEX idx (study_name);

insert into study(study_id, study_name, study_date)
values (3,"ìŠ¤í”„ë§","Sunday");
insert into study(study_id, study_name, study_date)
values (1,"cs","Monday");
insert into study(study_id, study_name, study_date)
values (2,"ë””ìì¸ íŒ¨í„´","Friday");

select * from study;
select * from study where study_name = 'cs';
select * from study where study_id = 1;
show index from study;

DROP INDEX study_name on study;

ALTER TABLE study
DROP INDEX stduy_name;
```

## Reference

[https://inpa.tistory.com/entry/MYSQL-ğŸ“š-ì¸ë±ìŠ¤index-í•µì‹¬-ì„¤ê³„-ì‚¬ìš©-ë¬¸ë²•-ğŸ’¯-ì´ì •ë¦¬](https://inpa.tistory.com/entry/MYSQL-%F0%9F%93%9A-%EC%9D%B8%EB%8D%B1%EC%8A%A4index-%ED%95%B5%EC%8B%AC-%EC%84%A4%EA%B3%84-%EC%82%AC%EC%9A%A9-%EB%AC%B8%EB%B2%95-%F0%9F%92%AF-%EC%B4%9D%EC%A0%95%EB%A6%AC)
